<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCHSinfo - 안산동산고등학교</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        /* 섹션 전환 애니메이션 */
        .section {
            display: none;
            animation: fadeIn 0.5s;
        }
        .section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* 사용자 정의 스크롤바 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- 헤더 및 네비게이션 -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-blue-600" data-section="home">
                <i class="fas fa-school mr-2"></i>DCHSinfo
            </a>
            <div class="hidden md:flex items-center space-x-4">
                <a href="#" class="text-gray-600 hover:text-blue-500 transition" data-section="home">홈</a>
                <a href="#" class="text-gray-600 hover:text-blue-500 transition" data-section="notice">공지사항</a>
                <a href="#" class="text-gray-600 hover:text-blue-500 transition" data-section="board">게시판</a>
                <a href="#" class="text-gray-600 hover:text-blue-500 transition" data-section="meal">급식알리미</a>
                <a href="http://comci.kr/st" target="_blank" class="text-gray-600 hover:text-blue-500 transition">시간표</a>
            </div>
            <div id="auth-links" class="hidden md:flex items-center space-x-2">
                <a href="#" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition" data-section="login">로그인</a>
                <a href="#" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition" data-section="login">회원가입</a>
            </div>
            <div id="user-profile" class="hidden md:flex items-center space-x-3">
                <span id="user-email" class="text-sm font-medium"></span>
                <button id="logout-button" class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition text-sm">로그아웃</button>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-2xl">
                <i class="fas fa-bars"></i>
            </button>
        </nav>
        <!-- 모바일 메뉴 -->
        <div id="mobile-menu" class="hidden md:hidden bg-white">
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100" data-section="home">홈</a>
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100" data-section="notice">공지사항</a>
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100" data-section="board">게시판</a>
            <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100" data-section="meal">급식알리미</a>
            <a href="http://comci.kr/st" target="_blank" class="block py-2 px-4 text-sm hover:bg-gray-100">시간표</a>
            <div id="mobile-auth-links" class="border-t mt-2 pt-2">
                 <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100" data-section="login">로그인</a>
                 <a href="#" class="block py-2 px-4 text-sm hover:bg-gray-100" data-section="login">회원가입</a>
            </div>
             <div id="mobile-user-profile" class="hidden border-t mt-2 pt-2 px-4 py-2">
                <span id="mobile-user-email" class="text-sm font-medium block mb-2"></span>
                <button id="mobile-logout-button" class="w-full bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition text-sm">로그아웃</button>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-6">
        <!-- 홈 섹션 -->
        <section id="home-section" class="section active">
            <div class="bg-white p-8 rounded-lg shadow-lg text-center">
                <div class="h-64 md:h-96 bg-cover bg-center rounded-lg mb-6" style="background-image: url('https://placehold.co/1200x400/3498db/ffffff?text=Ansan+Dongsan+High+School')">
                </div>
                <h1 class="text-4xl font-bold mb-2">안산동산고등학교에 오신 것을 환영합니다</h1>
                <p class="text-gray-600 text-lg mb-8">미래를 향한 꿈과 열정이 가득한 곳, DCHSinfo와 함께하세요.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <a href="#" data-section="board" class="bg-blue-500 text-white p-6 rounded-lg hover:bg-blue-600 transition-transform hover:scale-105 flex items-center justify-center flex-col">
                        <i class="fas fa-comments text-3xl mb-2"></i>
                        <span class="font-semibold">게시판</span>
                    </a>
                    <a href="#" data-section="notice" class="bg-green-500 text-white p-6 rounded-lg hover:bg-green-600 transition-transform hover:scale-105 flex items-center justify-center flex-col">
                        <i class="fas fa-bullhorn text-3xl mb-2"></i>
                        <span class="font-semibold">공지사항</span>
                    </a>
                    <a href="#" data-section="meal" class="bg-yellow-500 text-white p-6 rounded-lg hover:bg-yellow-600 transition-transform hover:scale-105 flex items-center justify-center flex-col">
                        <i class="fas fa-utensils text-3xl mb-2"></i>
                        <span class="font-semibold">오늘의 급식</span>
                    </a>
                    <a href="http://comci.kr/st" target="_blank" class="bg-purple-500 text-white p-6 rounded-lg hover:bg-purple-600 transition-transform hover:scale-105 flex items-center justify-center flex-col">
                        <i class="fas fa-calendar-alt text-3xl mb-2"></i>
                        <span class="font-semibold">시간표</span>
                    </a>
                </div>
            </div>
        </section>

        <!-- 로그인/회원가입 섹션 -->
        <section id="login-section" class="section">
             <div class="max-w-md mx-auto bg-white p-8 rounded-xl shadow-md">
                <div class="flex justify-center mb-6">
                    <button id="show-login-form" class="px-6 py-2 font-semibold text-blue-600 border-b-2 border-blue-600">로그인</button>
                    <button id="show-register-form" class="px-6 py-2 font-semibold text-gray-500">회원가입</button>
                </div>

                <!-- 로그인 폼 -->
                <form id="login-form" class="space-y-4">
                    <h2 class="text-2xl font-bold text-center text-gray-800">로그인</h2>
                    <div>
                        <label for="login-email" class="block mb-1 font-medium">이메일</label>
                        <input type="email" id="login-email" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" required>
                    </div>
                    <div>
                        <label for="login-password" class="block mb-1 font-medium">비밀번호</label>
                        <input type="password" id="login-password" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" required>
                    </div>
                    <button type="submit" class="w-full bg-blue-500 text-white p-3 rounded-lg font-semibold hover:bg-blue-600 transition">로그인</button>
                    <p id="login-error" class="text-red-500 text-sm text-center"></p>
                </form>

                <!-- 회원가입 폼 -->
                <form id="register-form" class="hidden space-y-4">
                     <h2 class="text-2xl font-bold text-center text-gray-800">회원가입</h2>
                    <div>
                        <label for="register-email" class="block mb-1 font-medium">이메일</label>
                        <input type="email" id="register-email" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" required>
                    </div>
                    <div>
                        <label for="register-password" class="block mb-1 font-medium">비밀번호</label>
                        <input type="password" id="register-password" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" required>
                    </div>
                     <div>
                        <label for="register-password-confirm" class="block mb-1 font-medium">비밀번호 확인</label>
                        <input type="password" id="register-password-confirm" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" required>
                    </div>
                    <button type="submit" class="w-full bg-blue-500 text-white p-3 rounded-lg font-semibold hover:bg-blue-600 transition">회원가입</button>
                    <p id="register-error" class="text-red-500 text-sm text-center"></p>
                </form>

                <!-- 소셜 로그인 -->
                <div class="mt-6">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-300"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-white text-gray-500">또는</span>
                        </div>
                    </div>
                    <div class="mt-4 grid grid-cols-1 gap-3">
                        <button id="google-login" class="w-full flex items-center justify-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                            <i class="fab fa-google text-red-500 mr-2"></i>
                            <span class="font-medium">Google 계정으로 로그인</span>
                        </button>
                        <!-- 페이스북, 인스타그램 등 다른 소셜 로그인은 API 정책에 따라 구현이 복잡할 수 있습니다. -->
                    </div>
                </div>
            </div>
        </section>

        <!-- 공지사항 섹션 (게시판과 유사, 읽기 전용) -->
        <section id="notice-section" class="section">
             <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-3xl font-bold mb-6 border-b pb-4">공지사항</h2>
                <!-- 공지사항 목록 -->
                <div id="notice-list" class="space-y-4">
                    <!-- 공지사항 아이템 예시 -->
                    <div class="p-4 border rounded-lg hover:shadow-md transition cursor-pointer">
                        <h3 class="font-bold text-lg text-blue-600">[중요] 2025학년도 학사일정 안내</h3>
                        <p class="text-sm text-gray-500">2025.08.15 | 관리자</p>
                    </div>
                     <div class="p-4 border rounded-lg hover:shadow-md transition cursor-pointer">
                        <h3 class="font-bold text-lg">여름방학 방과후학교 신청 안내</h3>
                        <p class="text-sm text-gray-500">2025.08.10 | 관리자</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 게시판 섹션 -->
        <section id="board-section" class="section">
             <div class="bg-white p-6 rounded-lg shadow-lg">
                <div class="flex justify-between items-center mb-6 border-b pb-4">
                    <h2 class="text-3xl font-bold">자유 게시판</h2>
                    <button id="show-post-modal-button" class="bg-blue-500 text-white px-5 py-2 rounded-md hover:bg-blue-600 transition">
                        <i class="fas fa-pen mr-2"></i>글쓰기
                    </button>
                </div>
                <!-- 게시글 목록 -->
                <div id="post-list" class="space-y-3">
                   <!-- 게시글이 여기에 동적으로 추가됩니다. -->
                   <p class="text-gray-500 text-center py-10">게시글을 불러오는 중입니다...</p>
                </div>
            </div>
        </section>
        
        <!-- 글쓰기/상세보기 모달 -->
        <div id="post-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-lg shadow-xl w-11/12 md:w-2/3 lg:w-1/2 max-h-[90vh] flex flex-col">
                <div class="p-5 border-b flex justify-between items-center">
                    <h3 id="modal-title" class="text-2xl font-bold">새 글 작성</h3>
                    <button id="close-modal-button" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
                </div>
                <!-- 글쓰기 폼 -->
                <form id="post-form" class="p-5 space-y-4 overflow-y-auto">
                    <input type="hidden" id="post-id">
                    <div>
                        <label for="post-title" class="block mb-1 font-medium">제목</label>
                        <input type="text" id="post-title" class="w-full p-2 border rounded-md" required>
                    </div>
                    <div>
                        <label for="post-content" class="block mb-1 font-medium">내용</label>
                        <textarea id="post-content" rows="8" class="w-full p-2 border rounded-md" required></textarea>
                    </div>
                     <div class="text-right">
                        <button type="submit" id="save-post-button" class="bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600">저장</button>
                    </div>
                </form>
                <!-- 글 상세보기 -->
                <div id="post-view" class="p-5 space-y-4 overflow-y-auto hidden">
                    <div id="post-detail-content">
                        <!-- 선택된 게시글 내용 -->
                    </div>
                    <div class="border-t pt-4">
                        <h4 class="font-bold text-lg mb-2">댓글</h4>
                        <div id="comment-list" class="space-y-3 mb-4 max-h-48 overflow-y-auto">
                            <!-- 댓글 목록 -->
                        </div>
                        <form id="comment-form" class="flex gap-2">
                            <input type="text" id="comment-input" class="flex-grow p-2 border rounded-md" placeholder="댓글을 입력하세요..." required>
                            <button type="submit" class="bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-800">등록</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>


        <!-- 급식 알리미 섹션 -->
        <section id="meal-section" class="section">
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-3xl font-bold mb-6 border-b pb-4 text-center">오늘의 급식</h2>
                <div class="flex justify-center items-center mb-4">
                    <button id="prev-day" class="p-2 text-xl"><i class="fas fa-chevron-left"></i></button>
                    <h3 id="meal-date" class="text-xl font-semibold mx-4"></h3>
                    <button id="next-day" class="p-2 text-xl"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div id="meal-content" class="min-h-[200px] bg-gray-50 p-6 rounded-lg flex items-center justify-center">
                    <p class="text-gray-500">급식 정보를 불러오는 중입니다...</p>
                </div>
            </div>
        </section>
    </main>

    <!-- 알림 메시지 -->
    <div id="toast" class="fixed bottom-5 right-5 bg-gray-800 text-white px-5 py-3 rounded-lg shadow-xl opacity-0 translate-y-10 transition-all duration-300">
        <p id="toast-message"></p>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase 구성은 다음 단계에서 추가됩니다.
        // 여기에 Firebase 초기화 및 관련 로직이 들어갑니다.

        // --- UI 및 네비게이션 로직 ---

        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('.section');
            const navLinks = document.querySelectorAll('nav a[data-section], #home-section a[data-section], #mobile-menu a[data-section]');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            function showSection(sectionId) {
                sections.forEach(section => {
                    if (section.id === sectionId + '-section') {
                        section.classList.add('active');
                    } else {
                        section.classList.remove('active');
                    }
                });
                // 모바일 메뉴가 열려있으면 닫기
                mobileMenu.classList.add('hidden');
            }
            
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = link.dataset.section;
                    showSection(sectionId);
                });
            });

            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // 로그인/회원가입 폼 전환
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const showLoginFormBtn = document.getElementById('show-login-form');
            const showRegisterFormBtn = document.getElementById('show-register-form');

            showLoginFormBtn.addEventListener('click', () => {
                loginForm.classList.remove('hidden');
                registerForm.classList.add('hidden');
                showLoginFormBtn.classList.add('text-blue-600', 'border-blue-600');
                showLoginFormBtn.classList.remove('text-gray-500');
                showRegisterFormBtn.classList.add('text-gray-500');
                showRegisterFormBtn.classList.remove('text-blue-600', 'border-blue-600');
            });
            
            showRegisterFormBtn.addEventListener('click', () => {
                loginForm.classList.add('hidden');
                registerForm.classList.remove('hidden');
                showRegisterFormBtn.classList.add('text-blue-600', 'border-blue-600');
                showRegisterFormBtn.classList.remove('text-gray-500');
                showLoginFormBtn.classList.add('text-gray-500');
                showLoginFormBtn.classList.remove('text-blue-600', 'border-blue-600');
            });
            
            // 글쓰기 모달 제어
            const postModal = document.getElementById('post-modal');
            const showPostModalButton = document.getElementById('show-post-modal-button');
            const closeModalButton = document.getElementById('close-modal-button');
            const postForm = document.getElementById('post-form');
            const postView = document.getElementById('post-view');

            showPostModalButton.addEventListener('click', () => {
                postModal.classList.remove('hidden');
                postForm.classList.remove('hidden');
                postView.classList.add('hidden');
                postForm.reset();
                document.getElementById('post-id').value = '';
                document.getElementById('modal-title').textContent = '새 글 작성';
            });
            
            closeModalButton.addEventListener('click', () => {
                postModal.classList.add('hidden');
            });

            // 임시 급식 정보 로직
            const mealDateEl = document.getElementById('meal-date');
            const mealContentEl = document.getElementById('meal-content');
            const prevDayBtn = document.getElementById('prev-day');
            const nextDayBtn = document.getElementById('next-day');
            let currentDate = new Date();

            function formatDate(date) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            }

            function displayDate(date) {
                 const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
                 mealDateEl.textContent = date.toLocaleDateString('ko-KR', options);
            }
            
            function fetchMeal() {
                displayDate(currentDate);
                mealContentEl.innerHTML = `<p class="text-gray-500">급식 정보를 불러오는 중입니다... (${formatDate(currentDate)})</p>`;
                // 실제 API 호출은 다음 단계에서 구현합니다.
            }

            prevDayBtn.addEventListener('click', () => {
                currentDate.setDate(currentDate.getDate() - 1);
                fetchMeal();
            });
             nextDayBtn.addEventListener('click', () => {
                currentDate.setDate(currentDate.getDate() + 1);
                fetchMeal();
            });

            // 초기 급식 정보 로드
            fetchMeal();

        }); // END DOMContentLoaded

    </script>
</body>
</html>
